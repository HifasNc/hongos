<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Registro Producci√≥n - Hongos Ostra</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

<header>
  <h1>üçÑ Registro de Producci√≥n</h1>
  <p>Control integral de producci√≥n - Hongos Ostra</p>
</header>

<div class="tabs">
  <button onclick="showTab('calculadora')" id="tabCalculadora" class="active">Calculadora</button>
  <button onclick="showTab('preparacion')" id="tabPreparacion">Preparaci√≥n</button>
  <button onclick="showTab('inoculacion')" id="tabInoculacion">Inoculaci√≥n</button>
  <button onclick="showTab('incubacion')" id="tabIncubacion">Incubaci√≥n</button>
  <button onclick="showTab('fructificacion')" id="tabFructificacion">Fructificaci√≥n</button>
</div>

<main>
  <div id="calculadoraTab">
    <section class="form-section">
      <h2>Calculadora - Pasteurizaci√≥n Agua Caliente</h2>

      <div class="row">
        <label>Kilos paja
          <input type="number" id="paja" value="100" step="0.1">
        </label>
        <label>% Avena
          <input type="number" id="avenaPct" value="25" step="0.1">
        </label>
        <label>Litros agua/kg
          <input type="number" id="aguaKg" value="8" step="0.1">
        </label>
      </div>

      <div class="row">
        <label>% Yeso
          <input type="number" id="yesoPct" value="2" step="0.1">
        </label>
        <label>% Carbonato
          <input type="number" id="calPct" value="1" step="0.1">
        </label>
        <label>Capacidad Tarro (L)
          <input type="number" id="capTarro" value="10" step="0.1">
        </label>
      </div>

      <div class="row">
        <label>Densidad (kg/L)
          <input type="number" id="densidad" value="0.65" step="0.01">
        </label>
      </div>

      <button type="button" onclick="calcularPasteurizacion()">Calcular</button>

      <div class="calculations" id="resultadoPasteurizacion"></div>
    </section>

    <section class="form-section">
      <h2>Calculadora - Pasteurizaci√≥n alcalina</h2>

      <div class="row">
        <label>Cantidad de tarros (10 L)
          <input type="number" id="tarrosEncalado" value="20" min="0" step="1">
        </label>
        <label>Volumen por tarro (L)
          <input type="number" id="volumenTarroEncalado" value="10" min="0" step="0.1">
        </label>
      </div>

      <div class="row">
        <label>Porcentaje de spawn (%)
          <input type="number" id="spawnEncaladoPct" value="5" min="0" step="0.1">
        </label>
        <label>Litros de agua para encalado
          <input type="number" id="aguaEncalado" value="150" min="0" step="0.1">
        </label>
        <label>Gramos de cal por litro
          <input type="number" id="gramosCalLitro" value="10" min="0" step="0.1">
        </label>
      </div>

      <button type="button" onclick="calcularEncalado()">Calcular encalado</button>

      <div class="calculations" id="resultadoEncalado"></div>
    </section>
  </div>

  <div id="preparacionTab" style="display:none;">
    <section class="form-section">
      <h2>Preparaci√≥n</h2>

      <form id="entryForm">
        <div class="row">
          <label>Fecha<input type="date" id="fecha" required /></label>
          <label>Hora<input type="time" id="hora" required /></label>
        </div>

        <div class="row">
          <label>Hongo<input type="text" id="hongo" placeholder="Ej: Pleurotus ostreatus" required /></label>
          <label>Cepa<input type="text" id="cepa" placeholder="Ej: Mx-01" required /></label>
        </div>

        <h3>Sustrato</h3>

        <div id="sustratosContainer">
          <div class="block-card substrate-block" data-substrate-index="0">
            <h4>Sustrato base</h4>
            <div class="row">
              <label>Tipo de Sustrato<input type="text" name="tipoSustrato" placeholder="Ej: Paja de trigo" required /></label>
              <label>Peso Seco (kg)<input type="number" name="pesoSeco" min="0" step="0.01" placeholder="Ej: 10" required /></label>
            </div>
            <label class="full">Nutrientes Adicionales<input type="text" name="nutrientes" placeholder="Ej: Salvado de trigo, yeso" /></label>
          </div>
       
        <div class="substrate-actions">
          <button type="button" id="addSustratoBtn">+ A√±adir sustrato</button>
        </div>

        <div class="block-card">
          <h4>Procesamiento del Sustrato</h4>
          <div class="row">
            <label>Tiempo de Humectaci√≥n (horas)<input type="number" id="humectacion" min="0" step="0.1" placeholder="Ej: 12" required /></label>
            <label>Tipo de Esterilizaci√≥n<input type="text" id="esterilizacion" placeholder="Ej: Pasteurizaci√≥n alcalina" required /></label>
            <label>Tiempo (horas y minutos)<input type="time" id="tiempoProceso" required /></label>
          </div>
        </div>

        <label class="full">Observaciones<textarea id="obs"></textarea></label>

        <div class="actions">
          <button type="submit">Guardar</button>
          <button type="button" id="clearBtn">Limpiar</button>
        </div>
      </form>

      <div class="calculations">
        <h3>Totales</h3>
        <p id="totalEntradas">Entradas: 0</p>
       </div>
    </section>

    <section class="table-section">
      <h2>Historial</h2>
      <table id="entriesTable">
        <thead>
          <tr>
            <th>Fecha</th>
             <th>Hora</th>
            <th>Hongo</th>
            <th>Cepa</th>
            <th>Sustrato</th>
            <th>Peso seco</th>
            <th>Obs</th>
            <th>Acci√≥n</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>
  </div>

  <div id="inoculacionTab" style="display:none;">
    <section class="form-section">
      <h2>Inoculaci√≥n</h2>

      <div class="block-card">
        <div class="row">
          <label>ID del Lote
            <input type="text" id="loteId" placeholder="Ej: LOTE-001" />
          </label>
          <label>N¬∫ de Unidades
            <input type="number" id="numeroUnidades" min="0" step="1" placeholder="Ej: 120" />
          </label>
        </div>

        <div class="row">
          <label>M√©todo de inoculaci√≥n
            <input type="text" id="metodoInoculacion" placeholder="Ej: Capa por capa" />
          </label>
          <label>Ratio In√≥culo
            <input type="text" id="ratioInoculo" placeholder="Ej: 1:5" />
          </label>
        </div>
      </div>
    </section>
  </div>

  <div id="incubacionTab" style="display:none;">
    <section class="form-section">
      <h2>Incubaci√≥n</h2>
      
      <div class="block-card">
        <div class="row">
          <label>Cantidad de bolsas o tarros
            <input type="number" id="cantidadUnidadesIncubacion" min="0" step="1" placeholder="Ej: 100" />
          </label>
          <label>Peso h√∫medo por unidad (kg)
            <input type="number" id="pesoHumedoUnidad" min="0" step="0.01" placeholder="Ej: 1.2" />
          </label>
        </div>
      </div>

      <div class="block-card">
        <h4>1- Condiciones ambientales (diarias o cada control)</h4>
        <div class="row">
          <label>üå° Temperatura ambiente (¬∞C)
            <input type="number" id="tempAmbiente" step="0.1" placeholder="Ej: 24" />
          </label>
          <label>üíß Humedad relativa (%)
            <input type="number" id="humedadRelativa" min="0" max="100" step="0.1" placeholder="Ej: 70" />
          </label>
        </div>
        <div class="row">
          <label>üå¨ Ventilaci√≥n (s√≠/no o nivel)
            <input type="text" id="ventilacionIncubacion" placeholder="Ej: S√≠ / Media" />
          </label>
          <label>üåë Luz (oscuridad / baja luz)
            <input type="text" id="luzIncubacion" placeholder="Ej: Oscuridad" />
          </label>
        </div>
        <p class="hint">Sugerido ideal para <strong>Pleurotus ostreatus</strong>: Temperatura ideal <strong>20‚Äì26¬∞C</strong>, Humedad <strong>65‚Äì75%</strong>, sin luz directa.</p>
      </div>

      <div class="block-card">
        <h4>2- Seguimiento de Colonizaci√≥n</h4>
        <div class="row">
          <label>D√≠a desde inoculaci√≥n
            <input type="number" id="diaDesdeInoculacion" min="0" step="1" placeholder="Ej: 12" />
          </label>
          <label>% de colonizaci√≥n estimado
            <input type="number" id="colonizacionEstimada" min="0" max="100" step="0.1" placeholder="Ej: 75" />
          </label>
        </div>
        <fieldset class="checklist-fieldset">
          <legend>Observaciones visuales</legend>
          <label><input type="checkbox" id="obsMicelioUniforme" /> Micelio blanco uniforme ‚úî</label>
          <label><input type="checkbox" id="obsManchasVerdes" /> Manchas verdes (Trichoderma)</label>
          <label><input type="checkbox" id="obsManchasNegras" /> Manchas negras</label>
          <label><input type="checkbox" id="obsOlorExtrano" /> Olor extra√±o</label>
          <label><input type="checkbox" id="obsExcesoHumedad" /> Exceso de humedad</label>
        </fieldset>
      </div>

      <div class="block-card">
        <h4>3- Control de Contaminaci√≥n</h4>
        <div class="row">
          <label>N√∫mero de bolsas o tarros contaminades
            <input type="number" id="bolsasContaminadas" min="0" step="1" placeholder="Ej: 8" />
          </label>
          <label>Tipo de contaminaci√≥n
            <input type="text" id="tipoContaminacion" placeholder="Ej: Trichoderma" />
          </label>
        </div>
        <div class="row">
          <label>% de descarte del lote
            <input type="number" id="descarteLote" min="0" max="100" step="0.1" placeholder="Ej: 8" />
          </label>
          <label>Acci√≥n tomada (aislamiento / eliminaci√≥n)
            <input type="text" id="accionTomada" placeholder="Ej: Aislamiento" />
          </label>
        </div>
      </div>

      <div class="block-card">
        <h4>4- Tiempo Total de Incubaci√≥n</h4>
        <div class="row">
          <label>Fecha fin de incubaci√≥n
            <input type="date" id="fechaFinIncubacion" />
          </label>
          <label>D√≠as totales hasta 100% colonizaci√≥n
            <input type="number" id="diasColonizacionTotal" min="0" step="1" placeholder="Ej: 18" />
          </label>
        </div>
        <label class="full">Observaci√≥n final del lote
          <textarea id="observacionFinalLote" placeholder="Describe estado final del lote"></textarea>
        </label>
      </div>

      <div class="calculations" id="incubacionResumen">
        <h3>Sem√°foro autom√°tico</h3>
        <p id="semaforoEstado">üü¢ Colonizaci√≥n normal</p>
        <h3>C√°lculo autom√°tico</h3>
        <p id="promedioColonizacion">Tiempo promedio de colonizaci√≥n: 0 d√≠as</p>
        <p id="eficienciaLote">% de eficiencia del lote: 100.00%</p>
        <p id="tasaContaminacion">Tasa de contaminaci√≥n: 0.00%</p>
      </div>
    </section>
  </div>

  <div id="fructificacionTab" style="display:none;">
    <section class="form-section">
      <h2>üçÑ Fructificaci√≥n</h2>

      <label>Fecha ingreso:</label>
      <input type="date" id="fechaIngreso">

      <label>Peso seco total (kg):</label>
      <input type="number" id="pesoSeco">

      <hr>

      <h3>Registrar Cosecha (Flush)</h3>

      <label>N¬∞ Flush:</label>
      <input type="number" id="flushNumero">

      <label>Kg cosechados:</label>
      <input type="number" id="kgFlush" step="0.1">

      <button type="button" onclick="agregarFlush()">Agregar Cosecha</button>

      <div id="resumenFructificacion"></div>
    </section>
  </div>
</main>

<footer>
  <small>Proyecto Producci√≥n Hongos Ostra</small>
</footer>

<script src="app.js" defer></script>

</body>
</html>

